## Session 3: n8n 이것은 알고 시작하자 (기본 다지기)

### 1. 핵심 3요소: Trigger, Node, Flow

n8n은 복잡한 코딩 대신 **3가지 요소**의 조합으로 작동합니다.

* **Trigger (방아쇠):** "언제 실행할까?"
    * 자동화의 시작점입니다. (예: 매일 아침 9시, 메일이 도착했을 때, 버튼을 눌렀을 때)
* **Node (작업자):** "무엇을 할까?"
    * 데이터를 가공하거나 외부 도구와 통신하는 단위입니다. (예: AI에게 요약 시키기, 슬랙 보내기)
* **Flow (연결선):** "데이터의 이동 경로"
    * 왼쪽 노드가 뱉어낸 결과물(Output)이 선을 타고 오른쪽 노드의 재료(Input)로 들어갑니다.

---

### 2. 주요 Trigger 비교

| 구분 | Webhook (웹훅) | Schedule (스케줄) | Polling (폴링) |
| :--- | :--- | :--- | :--- |
| **비유** | 초인종 누르기 | 알람 시계 | 우편함 수시로 확인 |
| **방식** | 외부에서 신호를 줌 (URL) | 정해진 시간에 실행 | 주기적으로 변화 감지 |
| **특징** | 실시간 반응, 가장 빠름 | 주기적 업무에 적합 | 자원 소모가 있음 |

---

### 3. 데이터 흐름의 이해 (JSON & Item) **(★가장 중요)**

#### ① 컨베이어 벨트 위의 택배 상자 (Item)
n8n의 데이터는 **'Item'**이라는 택배 상자에 담겨 컨베이어 벨트(선)를 타고 흐릅니다.
* **Item 1개** = 택배 상자 1개 (`{ "이름": "철수", "나이": 20 }`)
* **Item 10개** = 택배 상자 10개

#### ② 자동 반복 처리 (Looping)
만약 Trigger에서 **100개의 데이터(Item)**가 들어왔다면?
* 다음 노드는 **알아서 100번 작동**합니다.
* 반복문(For-loop)을 짤 필요가 없습니다. 이것이 n8n이 강력한 이유입니다.

#### ③ JSON 구조와 Binary(파일)
* **JSON:** 글자, 숫자 데이터 (대부분의 데이터)
* **Binary:** 이미지, PDF, 엑셀 파일 등 (3일차 OCR 실습 때 다룰 예정)

```json
[
  {
    "json": {
      "이름": "김철수",
      "직무": "엔지니어"
    }
  }
]

```

---

### 4. [실습] 데이터 조작과 변수 매핑 (Mapping)

데이터를 변형하면서 n8n의 **'Expression(수식)'** 기능을 익혀봅시다.

**Step 1. 가상의 데이터 만들기**

1. `Manual Trigger` 노드 생성
2. `Code` 노드 연결 및 아래 코드 붙여넣기
```javascript
return [
  { json: { product: "Laptop", price: 1200 } },
  { json: { product: "Mouse", price: 20 } },
  { json: { product: "Keyboard", price: 80 } }
];

```


3. `Execute Node`를 눌러 데이터 3개가 생성된 것을 확인.

**Step 2. 가격 인상하기 (Edit Fields 노드)**

1. `Edit Fields` (구 Set 노드) 연결.
2. **Mode 설정 (중요!):** 값을 입력할 필드 옆의 작은 설정 아이콘을 눌러 **`Expression`** 모드로 바꿉니다. (입력창이 회색으로 변함)
3. **변수 연결 (Drag & Drop):**
* 왼쪽 `Input` 패널에서 `price` 값을 마우스로 잡아서
* 오른쪽 `Value` 입력창에 끌어다 놓습니다.
* 자동으로 `{{ $json.price }}`가 입력됩니다.


4. **수식 적용:**
* 입력된 값 뒤에 `* 1.1`을 덧붙입니다.
* 최종 수식: `{{ $json.price * 1.1 }}`



**Step 3. 결과 확인**

* 노드를 실행하고 오른쪽 `Output` 패널에서 가격이 10% 인상되었는지 확인합니다.

---

### 📝 1일차 요약 및 과제

**오늘 배운 것**

1. **Agent**는 혼자 일하지 않고 도구(Node)를 쓴다.
2. **JSON**은 택배 상자이고, n8n은 상자 개수만큼 알아서 반복 일처리를 한다.
3. **매핑(Mapping)**은 왼쪽 데이터를 드래그해서 오른쪽으로 던져 넣는 것이다.

**내일 예고**

* 이 기초 위에 **진짜 AI(LLM)**를 연결합니다.
* "복잡한 회의록을 던져주면, AI가 요약하고, 중요 이슈만 뽑아서 나에게 보고하는" 진짜 에이전트를 만듭니다.

