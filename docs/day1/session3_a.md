# ğŸ§© [Session 3 ì¶”ê°€ ì‹¤ìŠµ] AI ë‰´ìŠ¤ ìš”ì•½ ë´‡ ë§Œë“¤ê¸°

## ëª©í‘œ

* **NewsAPI**ë¥¼ í†µí•´ ë§¤ì¼ ìµœì‹  ë‰´ìŠ¤ë¥¼ ìë™ìœ¼ë¡œ ìˆ˜ì§‘í•©ë‹ˆë‹¤.
* ìˆ˜ì§‘ëœ ë‰´ìŠ¤(5ê±´)ë¥¼ **Code ë…¸ë“œ**ë¡œ ì •ë¦¬í•˜ì—¬ í•˜ë‚˜ì˜ í…ìŠ¤íŠ¸ë¡œ í•©ì¹©ë‹ˆë‹¤.
* **OpenAI(ChatGPT)**ì—ê²Œ "ì˜¤ëŠ˜ì˜ ë‰´ìŠ¤ íë¦„ì„ ìš”ì•½í•´ì¤˜"ë¼ê³  ì‹œí‚µë‹ˆë‹¤.
* ìš”ì•½ëœ ê²°ê³¼ë¥¼ **Google Chat** ìŠ¤í˜ì´ìŠ¤ë¡œ ì „ì†¡í•©ë‹ˆë‹¤. (ì„ íƒ ì‚¬í•­)

---

## ì „ì²´ ì›Œí¬í”Œë¡œìš° (Workflow)

```
graph LR
    A[Cron (ë§¤ì¼)] --> B[HTTP Request (ë‰´ìŠ¤ìˆ˜ì§‘)]
    B --> C[Code (ë°ì´í„° ê°€ê³µ)]
    C --> D[OpenAI (ìš”ì•½)]
    D --> E[Google Chat (ì „ì†¡)]

```

---

## 0ï¸âƒ£ ì‚¬ì „ ì¤€ë¹„

1. **NewsAPI í‚¤ ë°œê¸‰**: [https://newsapi.org](https://newsapi.org) ê°€ì… í›„ API Key ë³µì‚¬
2. **OpenAI API í‚¤**: ìˆ˜ì—… ì‹œê°„ì— ì‚¬ìš©í•œ í‚¤ ì¤€ë¹„
3. **Google Chat ìŠ¤í˜ì´ìŠ¤ ìƒì„±**:
* [Google Chat](https://mail.google.com/chat)
* **ìƒˆ ìŠ¤í˜ì´ìŠ¤ ë§Œë“¤ê¸°** (ì´ë¦„ ì˜ˆ: `ë‚´ ë‰´ìŠ¤ ì•Œë¦¼ë°©`)



---

## 1ï¸âƒ£ Cron ë…¸ë“œ â€“ ìŠ¤ì¼€ì¤„ëŸ¬

ë§¤ì¼ ì•„ì¹¨ ë‰´ìŠ¤ë¥¼ ë°›ì•„ì˜¤ê¸° ìœ„í•œ íŠ¸ë¦¬ê±°ì…ë‹ˆë‹¤.

* **Node:** `Schedule` (êµ¬ Cron)
* **Trigger Interval:** `Every Day`
* **Hour:** `08` (ì˜¤ì „ 8ì‹œ) / **Minute:** `00`
* *(ì‹¤ìŠµ ì‹œì—ëŠ” `Manual Trigger`ë¥¼ ì—°ê²°í•´ë‘ê³  í…ŒìŠ¤íŠ¸í•˜ì„¸ìš”.)*



---

## 2ï¸âƒ£ HTTP Request â€“ ë‰´ìŠ¤ ìˆ˜ì§‘

ìµœì‹  í—¤ë“œë¼ì¸ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.

* **Node:** `HTTP Request`
* **Method:** `GET`
* **URL:** `https://newsapi.org/v2/everything`
* **Query Parameters:**
* `q`: `í•œêµ­`
* `language`: `ko`
* `sortBy`: `publishedAt`
* `pageSize`: `10`
* `apiKey`: `(ì—¬ëŸ¬ë¶„ì˜ NewsAPI Key)`


* **Authentication:** `None` (íŒŒë¼ë¯¸í„°ì— í‚¤ë¥¼ ë„£ì—ˆìœ¼ë¯€ë¡œ ì—†ìŒ)

---

## 3ï¸âƒ£ Code ë…¸ë“œ â€“ ë°ì´í„° í•˜ë‚˜ë¡œ í•©ì¹˜ê¸° (ì¤‘ìš”!)

ê°€ì ¸ì˜¨ ë‰´ìŠ¤ ê¸°ì‚¬ 5ê°œë¥¼ **í•˜ë‚˜ì˜ ê¸´ í…ìŠ¤íŠ¸**ë¡œ ë¬¶ì–´ì„œ AIì—ê²Œ ì „ë‹¬í•´ì•¼ í•©ë‹ˆë‹¤. (ë”°ë¡œ ë³´ë‚´ë©´ AIê°€ 5ë²ˆ ì‹¤í–‰ë©ë‹ˆë‹¤.)

* **Node:** `Code` (êµ¬ Function)
* **Language:** `JavaScript`
* **Code:** (ì•„ë˜ ì½”ë“œë¥¼ ë³µì‚¬í•´ì„œ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”)

```javascript
// ì´ì „ ë…¸ë“œ(HTTP Request)ì—ì„œ ê°€ì ¸ì˜¨ ê¸°ì‚¬ ëª©ë¡
const articles = items[0].json.articles;

// ìƒìœ„ 5ê°œë§Œ ìë¥´ê¸°
const top5 = articles.slice(0, 5);

// ê¸°ì‚¬ ì œëª©ê³¼ ë§í¬ë¥¼ í•˜ë‚˜ì˜ ë¬¸ìì—´ë¡œ í•©ì¹˜ê¸°
let newsText = "";
top5.forEach((article, index) => {
  newsText += `${index + 1}. ${article.title}\n   (ë§í¬: ${article.url})\n\n`;
});

// ë‹¤ìŒ ë…¸ë“œ(OpenAI)ë¡œ ë„˜ê²¨ì¤„ ë°ì´í„° í¬ë§·íŒ…
return [
  {
    json: {
      news_content: newsText
    }
  }
];

```

---

## 4ï¸âƒ£ Ollama ë…¸ë“œ â€“ ìš”ì•½í•˜ê¸°

í•©ì³ì§„ ë‰´ìŠ¤ ë°ì´í„°ë¥¼ ë°”íƒ•ìœ¼ë¡œ ìš”ì•½ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.

* **Node:** `Ollama` (ë˜ëŠ” Basic LLM Chain)
* **Credential:** Ollama API Key ìƒì„± ë° ì—°ê²°
* **Model:** `ê¸°ì¡´ ëª¨ë¸ ì¬ì‚¬ìš©`
* **System Message:**
```text
ë‹¹ì‹ ì€ ì „ë¬¸ ë‰´ìŠ¤ ë¸Œë¦¬í•‘ ë¹„ì„œì…ë‹ˆë‹¤. ì…ë ¥ëœ ë‰´ìŠ¤ë“¤ì„ ì¢…í•©í•˜ì—¬ í•µì‹¬ë§Œ ê°„ê²°í•˜ê²Œ ìš”ì•½í•˜ì„¸ìš”.

```

* **User Message:** (Expression ëª¨ë“œ ì¼œê¸°)
```text
ì•„ë˜ëŠ” ì˜¤ëŠ˜ í•œêµ­ì˜ ì£¼ìš” ë‰´ìŠ¤ 5ê°€ì§€ì…ë‹ˆë‹¤.

{{ $json.news_content }}

---
ìœ„ ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ:
1. ì „ì²´ì ì¸ ì˜¤ëŠ˜ì˜ ì´ìŠˆë¥¼ í•œ ë¬¸ë‹¨ìœ¼ë¡œ ë¸Œë¦¬í•‘í•´ì£¼ì„¸ìš”.
2. ê° ê¸°ì‚¬ì˜ í•µì‹¬ì„ 1ì¤„ì”© ìš”ì•½ ë¦¬ìŠ¤íŠ¸ë¡œ ë§Œë“¤ì–´ì£¼ì„¸ìš”.

```

* Simplify Output: Off


---

## 5ï¸âƒ£ Code ë…¸ë“œ â€“ ê²°ê³¼ í™•ì¸

Code ë…¸ë“œë¥¼ ì‚¬ìš©í•´ì„œ, LLM ì˜ ë©”ì„¸ì§€ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.

1. ollama ëª¨ë¸ ì‘ë‹µì˜ ì¼ë¶€ë§Œ content ë¡œ ì¶”ì¶œí•©ë‹ˆë‹¤.

```javascript
return $input.all().map(item => {
  return {
    content: item.json.choices?.[0]?.message?.content || "ë‚´ìš© ì—†ìŒ"
  };
});
```
---

## âœ… ìµœì¢… ê²°ê³¼ í™•ì¸

1. **Test Workflow** ë²„íŠ¼ í´ë¦­
2. Google Chat ìŠ¤í˜ì´ìŠ¤ì— ìš”ì•½ëœ ë‰´ìŠ¤ê°€ ë´‡ ì´ë¦„ìœ¼ë¡œ ë„ì°©í–ˆëŠ”ì§€ í™•ì¸

---
